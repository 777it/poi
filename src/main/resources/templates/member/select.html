<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title>poi</title>
<script type="text/javascript" th:src="@{/js/jquery-3.1.1.min.js}"></script>
<script type="text/javascript">
function confirmDelete ( obj ) {
    if(!confirm('本当に削除しますか？')){
        /* キャンセルの時の処理 */
        return false;
    }else{
    	/* OKの時の処理 */
    	var deleteUrl = obj.getAttribute('name');
    	location.href =　deleteUrl;
    }

}
$(function(){
	$('#deleteArticle').on('click',function(){
	    if(!confirm('本当に削除しますか？')){
	        /* キャンセルの時の処理 */
	        return false;
	    }else{
	    	/* OKの時の処理 */
	    	location.href = "http://pori2.net/";
	    }
	});
});
</script>
<style> 
.heading {
overflow: auto;
}
.heading h3 {
width: 500px;
height: 20px;
float: left;
}
.heading img {
width: 32px;
height: 32px;
}
</style>
</head>
<body>
	<h1>Poi</h1>
	<div class="count">
		You have <span th:text="${articleCount}">0</span> memo...
	</div>	
	<form th:action="@{/member/top}" method="post">
		<input type="button" value="Poi" />
	</form>
	<form th:action="@{/member/create}" method="get">
		<input type="submit" value="create!" />
	</form>
	<form th:action="@{/member/setting}" method="get">
		<input type="submit" value="setting!" />
	</form>
	<form th:action="@{/member/logout}" method="post">
		<input type="submit" value="logout" />
	</form>	
	<form th:action="@{/member/search}" method="post">
		<select class="category" name="category">
			<option value="">Category</option>
			<option th:each="category : ${categoryList}"><span th:text="${category}"></span></option>
		</select>
		<select class="level" name="level">
			<option value="0">Level</option>
			<option value="1">Level1</option>
			<option value="2">Level2</option>
			<option value="3">Level3</option>
			<option value="4">Level4</option>
			<option value="5">Level5</option>
		</select>	
		<input type="submit" value="Search!" />
	</form>
	<hr />
	<h1>選択された記事画面</h1>
	<hr />
	<form th:action="@{/member/search}" method="post">
		<input type="hidden" name="category" th:value="${category}" />
		<input type="hidden" name="level" th:value="${level}" />
		<input type="submit" value="戻る" />
	</form>
	
	<div class="heading">
	 	<h3 th:text="*{article.title}"></h3>
 	 	<p>
	 		<a href="/member/update.html" th:href="@{/member/update/__*{article.id}__}"><img src="../images/icon-edit.png" id="updateArticle" th:attr="src=@{/images/icon-edit.png},alt=#{icon-edit}" /></a>
	 		<a href="" th:name="@{/member/delete/__*{article.id}__}" onclick="confirmDelete(this); return false;"><img src="../images/icon-delete.png" id="deleteArticle" th:attr="src=@{/images/icon-delete.png},alt=#{icon-delete}" /></a>	 	
	 	</p> 
	</div>
	<div class="body">
 		<div th:text="*{article.body}"></div>
 		<span th:text="*{article.id}"></span>
	 	<span th:text="*{article.category}"></span>
		<span th:text="*{article.level}"></span>
		<span th:text="*{article.updatedAt}"></span>			
	</div>
</body>
</html>